<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>七夕言情</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="style/index.css">
<link rel="stylesheet" type="text/css" href="style/pageA.css">
<link rel="stylesheet" type="text/css" href="style/pageB.css">
<style type="text/css">

</style>
</head>
<body>
	<div id="content">
		<!-- 主题部分 -->
		<ul class="content-wrap">
			<!-- 第一幅页面 -->
			<li>
				<div class="a_background">
					<div class="a_background_top"></div>
					<div class="a_background_middle"></div>
					<div class="a_background_botton"></div>
				</div>
				<!-- 云 -->
				<div class="cloudArea">
					<div class="cloud cloud1"></div>
					<div class="cloud cloud2"></div>
				</div>
				<!-- 太阳 -->
				<div id="sun"></div>
			</li>

			<!-- 第二幅页面 -->
			<li>
				<!-- 背景图 -->
				<div class="b_background"></div>
				<!-- 先让亮灯的图片先加载 防止出现闪屏现象 -->
				<div class="b_background_preload"></div>
				<!-- 商店 -->
				<div class="shop">
					<div class="door">
						<div class="door-left"></div>
						<div class="door-right"></div>
					</div>
					<!-- 灯 -->
					<div class="lamp"></div>
				</div>
			</li>

			<!-- 第三幅页面 -->
			<li>第三页</li>
		</ul>

		<!-- 测试按钮 -->
		<div class="button">
			<button>开始</button>
		</div>
<!-- 		<div class="button" id="btn2" style="left: 50px;">
	<button>开门</button>
</div>
<div class="button" id="btn3" style="left: 100px;">
	<button>关门</button>
</div> -->

		<!-- 男孩与根节点并列 -->
		<div id="boy" class="charector slowwalk"></div>
	</div> 




	<script type="text/javascript" src="scripts/jquery.js"></script>

	<!-- 引入jquery.transit插件 -->
	<script type="text/javascript" src="scripts/jquery.transit.js"></script>
	<script type="text/javascript" src="scripts/BoyWalk.js"></script>
	<script type="text/javascript" src="scripts/Swipe.js"></script>
	<script type="text/javascript" src="scripts/Qixi.js"></script>


	<script type="text/javascript">
		/*var swipe = Swipe($("#content"));*/
		$(function(){
			var container = $("#content");
			var swipe = Swipe(container);
			var boy = BoyWalk();

			//页面滚到对应的位置
			function scrollTo(time,proportionX){
				var distX = container.width() * proportionX;
				swipe.scrollTo(distX,time);
			}

			function startRun(){
				boy.walkTo(2000,0.5)
					.then(function(){
						//暂停走路
						boy.stopWalk();
					})
					.then(function(){
						//开门
						return openDoor();
					})
					.then(function(){
						//开灯
						lamp.bright();
					})
					.then(function(){
						//进商店
						return boy.toShop(5000);
					})
					.then(function(){
						//出商店
						return boy.outShop(5000);
					})
					.then(function(){
						//灯暗
						lamp.dark();
					})
					.then(function(){
						//关门
						return closeDoor();
					});
			}



		
			//开始
			$(".button:first").click(function(){
				
				//太阳旋转
				$("#sun").addClass('rotation');

				//云移动
				$(".cloud1").addClass('cloud1Anim');
				$(".cloud2").addClass('cloud2Anim');

				//开始第一次走路
				//页面开始滚动
				boy.walkTo(2000,0.2).then(function(){
					scrollTo(5000,1)
				}).then(function(){
					//第二次走路
					return boy.walkTo(5000,0.5);
				}).then(startRun);
			});

			


			

/*
			$("#btn2").click(function(){
				openDoor().then(function(){
					lamp.bright();
				});
			});
			$("#btn3").click(function(){
				closeDoor().then(function(){
					lamp.dark();
				});
			});*/

		});

		
	</script>
</body>
</html>